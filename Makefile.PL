#!/usr/bin/perl -w
# $Id: Makefile.PL 2693 2008-01-02 09:54:19Z hospelt $
use 5.006001;
use ExtUtils::MakeMaker;
WriteMakefile
    (NAME              => 'WEC::RecordTailer',
     VERSION_FROM      => 'lib/WEC/RecordTailer.pm', # finds $VERSION
     PREREQ_PM         => {
         "Exporter::Tidy"	=> 0.05,
         "Test::More"		=> 0.11,	# For the tests only
     },
     ($] >= 5.005 ?     ## Add these new keywords supported since 5.005
      (AUTHOR         => 'Ton Hospel <WEC::RecordTailer@ton.iguana.be>') : ()),
     $^O eq "MSWin32" ? (
         PM_FILTER	=> '$(PERL) -p -e1',
     ) : (),
     clean		=> {
         FILES => '$(DISTNAME).ppd ppm cover_db',
     },
);

# START MY
# autogenerated by release_pm
BEGIN {
package MY;
use vars qw(%postamble);

$postamble{ppm} = <<'EOF';
ppm: $(DISTNAME).ppd
	makeppd.pl "--perl=$(PERLRUN)" --min_version=1.015 "--zip=$(ZIP)" "--tar=$(TAR)" "--compress=$(COMPRESS)" --leave=ppm "--objects=$(OBJECT)" $(DISTNAME).ppd $(VERSION)
EOF

$postamble{ppm3} = <<'EOF';
ppm3: $(DISTNAME).ppd
	makeppd.pl "--perl=$(PERLRUN)" --min_version=1.015 "--zip=$(ZIP)" "--tar=$(TAR)" "--compress=$(COMPRESS)" --ppm_version=3 --leave=ppm3 "--objects=$(OBJECT)" $(DISTNAME).ppd $(VERSION)
EOF

$postamble{ppm4} = <<'EOF';
ppm4: $(DISTNAME).ppd
	makeppd.pl "--perl=$(PERLRUN)" --min_version=1.015 "--zip=$(ZIP)" "--tar=$(TAR)" "--compress=$(COMPRESS)" --ppm_version=4 --leave=ppm4 "--objects=$(OBJECT)" $(DISTNAME).ppd $(VERSION)
EOF

$postamble{ppd} = <<'EOF';
$(DISTNAME).ppd: all ppd
EOF

$postamble{cover} = <<'EOF';
cover:
	cover -delete
	mkdir cover_db
	-HARNESS_PERL_SWITCHES=-MDevel::Cover make test
	cover
EOF

$postamble{ppm_install} = <<'EOF';
ppm_install: ppm
	ppm install ppm/$(DISTNAME).ppd
EOF

$postamble{ppm_uninstall} = <<'EOF';
ppm_uninstall:
	ppm uninstall $(DISTNAME)
EOF

BEGIN { undef &postamble }
sub postamble {
    return shift->SUPER::postamble() . join("\n", @postamble{sort {uc $a cmp uc $b || $a cmp $b } keys %postamble});
}
}
# END MY
